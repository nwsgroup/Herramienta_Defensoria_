<div class="container mt-5">
  <h3>Derecho de petición</h3>
  <p>
    El derecho de petición es un derecho fundamental reconocido en la mayoría de
    los países que garantiza a los ciudadanos la posibilidad de dirigirse a las
    autoridades públicas para solicitar información, hacer consultas, formular
    quejas o presentar propuestas sobre cualquier tema de interés general.
  </p>

  <form [formGroup]="DerechoDePeticion" (ngSubmit)="onSubmit()">
    <!--Numeral 1-->
    <div class="d-flex align-items-start mt-5">
      <div
        class="rounded-circle bg-primary text-white p-1 mr-2 d-flex align-items-center justify-content-center"
        style="width: 25px; height: 25px"
      >
        <strong>1</strong>
      </div>
      <div class="form-group">
        <!-- Label: ¿A quién va dirigida carta? -->
        <label class="text-primary" for="destinatario"
          ><strong>¿A quién va dirigida esta carta?</strong></label
        >
        <div id="destinatarioHelpBlock" class="form-text">
          Indica en los siguientes los campos el nombre y cargo de la autoridad
          a quien se dirige.
        </div>
      </div>
    </div>

    <div class="row">
      <!-- Input para la Ciudad -->
      <div class="col-md-6">
        <div class="form-group mt-2">
          <label for="ciudad"><strong>Ciudad</strong> -</label
          ><label class="text-primary"><strong>(requerido)</strong></label>
          <div class="input-group">
            <input
              type="text"
              class="form-control"
              formControlName="ciudad"
              id="ciudad"
              placeholder="Ingresa la ciudad"
              [class.is-invalid]="
                DerechoDePeticion.get('ciudad')?.invalid &&
                DerechoDePeticion.get('ciudad')?.touched
              "
              required
            />
            <!-- Icono de alerta y mensaje de ayuda -->
            <button
              type="button"
              class="btn btn-primary"
              data-bs-toggle="tooltip"
              data-bs-placement="top"
              data-bs-custom-class="custom-tooltip"
              data-bs-title="La ciudad de quien escribe y la fecha en la que se escribe dejan constancia del lugar y la fecha en la que se firma."
            >
              <i
                class="fas fa-exclamation-circle text-white"
                style="width: 25px; height: 25px"
              ></i>
            </button>
          </div>
          <small
            *ngIf="
              DerechoDePeticion.get('ciudad')?.invalid &&
              DerechoDePeticion.get('ciudad')?.touched
            "
            class="text-danger"
          >
            La ciudad es obligatoria
          </small>
        </div>
      </div>

      <!-- Input para la Fecha -->
      <div class="col-md-6 mt-2">
        <div class="form-group">
          <label for="fecha"><strong>Fecha</strong> -</label
          ><label class="text-primary"><strong>(requerido)</strong></label>
          <div class="input-group">
            <input
              class="form-control"
              type="date"
              formControlName="fecha"
              name="fecha"
              id="fecha"
              required
              (input)="onDateChange($event)"
              [class.is-invalid]="
                DerechoDePeticion.get('fecha')?.invalid &&
                DerechoDePeticion.get('fecha')?.touched
              "
            />
            <!-- Icono de alerta y mensaje de ayuda -->
            <div>
            <button
              type="button"
              class="btn btn-primary"
              data-bs-toggle="tooltip"
              data-bs-placement="top"
              data-bs-custom-class="custom-tooltip"
              data-bs-title="IMPORTANTE: La fecha más relevante es aquella en la que se presenta en la petición ante la entidad. La fecha en la que se envía por correo electrónico o la fecha en la que se presenta en la ventanilla."
            >
              <i
                class="fas fa-exclamation-circle text-white"
                style="width: 25px; height: 25px"
              ></i>
            </button>
            </div>
          </div>
          <small
            *ngIf="
              DerechoDePeticion.get('fecha')?.invalid &&
              DerechoDePeticion.get('fecha')?.touched
            "
            class="text-danger"
          >
            La fecha es obligatoria
          </small>
        </div>
      </div>
    </div>

    <div class="form-group mt-2">
      <label for="destinatario"><strong>Destinatario</strong> -</label
      ><label class="text-primary"><strong>(requerido)</strong></label>
      <div class="input-group">
        <input
          type="text"
          class="form-control"
          formControlName="destinatario"
          id="destinatario"
          placeholder="Ingresa el nombre del destinatario"
          [class.is-invalid]="
            DerechoDePeticion.get('destinatario')?.invalid &&
            DerechoDePeticion.get('destinatario')?.touched
          "
          required
        />
        <!-- Icono de alerta y mensaje de ayuda -->
        <button
          type="button"
          class="btn btn-primary"
          data-bs-toggle="tooltip"
          data-bs-placement="top"
          data-bs-custom-class="custom-tooltip"
          data-bs-title="El destinatario es la autoridad a quien se dirige la petición. Puede ser una persona natural o jurídica."
        >
          <i
            class="fas fa-exclamation-circle text-white"
            style="width: 25px; height: 25px"
          ></i>
        </button>
      </div>
      <small
        *ngIf="
          DerechoDePeticion.get('destinatario')?.invalid &&
          DerechoDePeticion.get('destinatario')?.touched
        "
        class="text-danger"
      >
        El destinatario es obligatorio
      </small>
    </div>

    <div class="form-group mt-2">
        <label for="cargoDestinatario"><strong>Cargo del destinatario</strong> -</label
        ><label class="text-primary"><strong>(requerido)</strong></label>
        <div class="input-group">
          <input
            type="text"
            class="form-control"
            formControlName="cargoDestinatario"
            id="cargoDestinatario"
            placeholder="Ingresa el cargo del destinatario"
            [class.is-invalid]="
              DerechoDePeticion.get('cargoDestinatario')?.invalid &&
              DerechoDePeticion.get('cargoDestinatario')?.touched
            "
            required
          />
          <!-- Icono de alerta y mensaje de ayuda -->
          <button
            type="button"
            class="btn btn-primary"
            data-bs-toggle="tooltip"
            data-bs-placement="top"
            data-bs-custom-class="custom-tooltip"
            data-bs-title="El cargo del destinatario es la autoridad a quien se dirige la petición."
          >
            <i
              class="fas fa-exclamation-circle text-white"
              style="width: 25px; height: 25px"
            ></i>
          </button>
        </div>
        <small
          *ngIf="
            DerechoDePeticion.get('cargoDestinatario')?.invalid &&
            DerechoDePeticion.get('cargoDestinatario')?.touched
          "
          class="text-danger"
        >
          El cargo del destinatario es obligatorio
        </small>
      </div>

      <div class="form-group mt-2">
        <label for="ciudadDestinatario"><strong>Ciudad del destinatario</strong> -</label
        ><label class="text-primary"><strong>(requerido)</strong></label>
        <div class="input-group">
          <input
            type="text"
            class="form-control"
            formControlName="ciudadDestinatario"
            id="ciudadDestinatario"
            placeholder="Ingresa la ciudad del destinatario"
            [class.is-invalid]="
              DerechoDePeticion.get('ciudadDestinatario')?.invalid &&
              DerechoDePeticion.get('ciudadDestinatario')?.touched
            "
            required
          />
          <!-- Icono de alerta y mensaje de ayuda -->
          <button
            type="button"
            class="btn btn-primary"
            data-bs-toggle="tooltip"
            data-bs-placement="top"
            data-bs-custom-class="custom-tooltip"
            data-bs-title="La ciudad del destinatario a quien se dirige la petición."
          >
            <i
              class="fas fa-exclamation-circle text-white"
              style="width: 25px; height: 25px"
            ></i>
          </button>
        </div>
        <small
          *ngIf="
            DerechoDePeticion.get('ciudadDestinatario')?.invalid &&
            DerechoDePeticion.get('ciudadDestinatario')?.touched
          "
          class="text-danger"
        >
          La ciudad del destinatario es obligatorio
        </small>
      </div>

    <!--Numeral 2-->
    <div class="d-flex align-items-start mt-5">
      <div
        class="rounded-circle bg-primary text-white p-1 mr-2 d-flex align-items-center justify-content-center"
        style="width: 25px; height: 25px"
      >
        <strong>2</strong>
      </div>
      <div class="form-group">
        <!-- Label: ¿Qué desea solicitar en este derecho de petición? -->
        <label class="text-primary" for="remitente"
          ><strong>¿Qué desea solicitar en este derecho de petición?</strong></label
        >
        <div id="remitenteHelpBlock" class="form-text">
          Indica en los siguientes los campos la solicitud que deseas realizar.
        </div>
      </div>
    </div>

    <!-- Campo para la solicitud-->
    <div class="form-group mt-2">
      <label for="solicitud"><strong>Solicitud </strong> - </label
      ><label class="text-primary"><strong>(requerido)</strong></label>
      <!-- Icono de alerta y mensaje de ayuda -->
      <div class="input-group">
        <textarea
          [class.is-invalid]="
            DerechoDePeticion.get('solicitud')?.invalid &&
            DerechoDePeticion.get('solicitud')?.touched
          "
          rows="6"
          class="form-control"
          formControlName="solicitud"
          id="solicitud"
          placeholder="Ingresa la solicitud que deseas realizar en esta petición"
          required
        ></textarea>
        <div>
          <button
            type="button"
            class="btn btn-primary"
            data-bs-toggle="tooltip"
            data-bs-placement="top"
            data-bs-custom-class="custom-tooltip"
            data-bs-title="Ingresa la solicitud que deseas realizar en esta petición"
          >
            <i
              class="fas fa-exclamation-circle text-white"
              style="width: 25px; height: 25px"
            ></i>
          </button>
        </div>
      </div>
      <small
        *ngIf="
          DerechoDePeticion.get('solicitud')?.invalid &&
          DerechoDePeticion.get('solicitud')?.touched
        "
        class="text-danger"
      >
        La solicitud es obligatoria
      </small>
    </div>

    <!-- Campo para los archivos adjuntos -->
    <div class="form-group mt-2">
      <label for="adjunto"> <strong>Documentos adjuntos </strong> - </label
      ><label class="text-primary"><strong>(requerido)</strong> </label>
      <!-- Icono de alerta y mensaje de ayuda -->
      <div id="destinatarioHelpBlock" class="form-text" style="font-size: 18px;">
        Para agregar mas documentos adjuntos use el botón de <strong class="text-primary"> + </strong>  para eliminar use <strong class="text-danger"> - </strong>
      </div>



      <ng-container
        formArrayName="adjunto"
        *ngFor="
          let row of adjunto.controls;
          index as i;
          first as isFirst;
          last as isLast
        "
        class="input-group"
      >
        <ng-container *ngIf="isFirst" [formGroupName]="i">
          <div class="input-group">
            <textarea
              [class.is-invalid]="
                DerechoDePeticion.get('adjunto')?.invalid &&
                DerechoDePeticion.get('adjunto')?.touched &&
                isLast
              "
              rows="6"
              class="form-control"
              formControlName="contenido"
              id="adjunto{{ i }}"
              placeholder="Ordenar los documentos adjuntos de manera cronológica."
              required
            ></textarea>

            <div class="d-flex flex-column">
              <div class="mb-2">
                <button
                  type="button"
                  class="btn btn-primary"
                  data-bs-toggle="tooltip"
                  data-bs-placement="top"
                  data-bs-custom-class="custom-tooltip"
                  data-bs-title="Ordenar los documentos adjuntos de manera cronológica."
                >
                  <i
                    class="fas fa-exclamation-circle text-white"
                    style="width: 25px; height: 25px"
                  ></i>
                </button>
              </div>
              <div *ngIf="isLast" class="float-end ms-2">
                <!-- Botón para agregar un nuevo campo -->
                <button
                  type="button"
                  class="btn btn-primary mt-2"
                  (click)="agregarAdjunto()"
                >
                  <i class="fas fa-plus"></i>
                </button>
              </div>

              <div *ngIf="isLast" class="float-end ms-2">
                <!-- Botón para eliminar un nuevo campo-->
                <button
                  type="button"
                  class="btn btn-danger mt-2"
                  (click)="eliminarAdjunto()"
                >
                  <i class="fas fa-minus"></i>
                </button>
              </div>


            </div>
          </div>
          <small
            *ngIf="
              DerechoDePeticion.get('adjunto')?.invalid &&
              DerechoDePeticion.get('adjunto')?.touched &&
              isLast
            "
            class="text-danger"
          >
            Los adjunto son obligatorios
          </small>
        </ng-container>

        <ng-container *ngIf="!isFirst" [formGroupName]="i">
          <div class="input-group">
            <textarea
              [class.is-invalid]="
                DerechoDePeticion.get('adjunto')?.invalid &&
                DerechoDePeticion.get('adjunto')?.touched &&
                isLast
              "
              rows="6"
              class="form-control"
              formControlName="contenido"
              id="adjunto{{ i }}"
              placeholder="Hacer el relato de los adjunto que configuran el incumplimiento de la norma"
              required
            ></textarea>
            <div *ngIf="isLast" class="float-end ms-2">
              <!-- Botón para agregar un nuevo campo -->
              <button
                type="button"
                class="btn btn-primary mt-2"
                (click)="agregarAdjunto()"
              >
                <i class="fas fa-plus"></i>
              </button>
            </div>
            <div *ngIf="isLast" class="float-end ms-2">
              <!-- Botón para eliminar un nuevo campo-->
              <button
                type="button"
                class="btn btn-danger mt-2"
                (click)="eliminarAdjunto()"
              >
                <i class="fas fa-minus"></i>
              </button>
            </div>


          </div>
          <small
            *ngIf="
              DerechoDePeticion.get('adjunto')?.invalid &&
              DerechoDePeticion.get('adjunto')?.touched &&
              isLast
            "
            class="text-danger"
          >
            Los documentos adjuntos son obligatorios
          </small>
        </ng-container>
      </ng-container>
    </div>
    <!-- Numeral 4-->
    <div class="d-flex align-items-start mt-5">
      <div
          class="rounded-circle bg-primary text-white p-1 mr-2 d-flex align-items-center justify-content-center"
          style="width: 25px; height: 25px"
      >
          <strong>4</strong>
      </div>
      <div class="form-group">
          <!-- Label: Datos de la persona que hace la solicitud -->
          <label class="text-primary" for="destinatario"
          ><strong>Datos de la persona que hace esta solicitud</strong></label
          >
          <div id="destinatarioHelpBlock" class="form-text">
          Indica en los siguientes los campos los datos de la persona que hace esta solicitud.
          </div>
      </div>
  </div>

  <div class="row">
      <!-- Input para los datos del solicitante-->
      <div class="col-md-6">
        <div class="form-group">
          <label for="nombreSolicitante"><strong>Nombre(s) y Apellido(s)</strong> -</label
          ><label class="text-primary"><strong>(requerido)</strong></label>
          <div class="input-group">
            <input
              [class.is-invalid]="
                DerechoDePeticion.get('nombreSolicitante')?.invalid &&
                DerechoDePeticion.get('nombreSolicitante')?.touched
              "
              type="text"
              class="form-control"
              formControlName="nombreSolicitante"
              id="nombreSolicitante"
              placeholder="Ej: Juan Perez"
              required
            />
            <!-- Icono de alerta y mensaje de ayuda -->
            <button
              type="button"
              class="btn btn-primary"
              data-bs-toggle="tooltip"
              data-bs-placement="top"
              data-bs-custom-class="custom-tooltip"
              data-bs-title="Nombres y apellidos de la persona que hace la solicitud"
            >
              <i
                class="fas fa-exclamation-circle text-white"
                style="width: 25px; height: 25px"
              ></i>
            </button>
          </div>
          <small
            *ngIf="
              DerechoDePeticion.get('nombreSolicitante')?.invalid &&
              DerechoDePeticion.get('nombreSolicitante')?.touched
            "
            class="text-danger"
          >
            La ciudad es obligatoria
          </small>
        </div>
      </div>

      <!-- Input para la cedula -->
      <div class="col-md-6">
        <div class="form-group">
          <label for="cedulaSolicitante"><strong>Cédula de Ciudadanía</strong> -</label
          ><label class="text-primary"><strong>(requerido)</strong></label>
          <div class="input-group">
            <input
              [class.is-invalid]="
                DerechoDePeticion.get('cedulaSolicitante')?.invalid &&
                DerechoDePeticion.get('cedulaSolicitante')?.touched
              "
              type="number"
              class="form-control"
              formControlName="cedulaSolicitante"
              id="cedulaSolicitante"
              placeholder="Solo numeros, sin espacios"
              required
            />
            <!-- Icono de alerta y mensaje de ayuda -->
            <button
              type="button"
              class="btn btn-primary"
              data-bs-toggle="tooltip"
              data-bs-placement="top"
              data-bs-custom-class="custom-tooltip"
              data-bs-title="Solo numeros, sin espacios."
            >
              <i
                class="fas fa-exclamation-circle text-white"
                style="width: 25px; height: 25px"
              ></i>
            </button>
          </div>
          <small
            *ngIf="
              DerechoDePeticion.get('cedulaSolicitante')?.invalid &&
              DerechoDePeticion.get('cedulaSolicitante')?.touched
            "
            class="text-danger"
          >
            La direccion es obligatoria
          </small>
        </div>
      </div>
    </div>

    

    <div class="row">
      <!-- Input para la expedicion de la cedula -->
      <div class="col-md-6">
        <div class="form-group">
          <label for="cedulaExpedicion"><strong>Ciudad de expedición de la cédula</strong> -</label
          ><label class="text-primary"><strong>(requerido)</strong></label>
          <div class="input-group">
            <input
              [class.is-invalid]="
                DerechoDePeticion.get('cedulaExpedicion')?.invalid &&
                DerechoDePeticion.get('cedulaExpedicion')?.touched
              "
              type="text"
              class="form-control"
              formControlName="cedulaExpedicion"
              id="cedulaExpedicion"
              placeholder="Ciudad de expedición de la cédula."
              required
            />
            <!-- Icono de alerta y mensaje de ayuda -->
            <button
              type="button"
              class="btn btn-primary"
              data-bs-toggle="tooltip"
              data-bs-placement="top"
              data-bs-custom-class="custom-tooltip"
              data-bs-title="Ciudad de expedición de la cédula."
            >
              <i
                class="fas fa-exclamation-circle text-white"
                style="width: 25px; height: 25px"
              ></i>
            </button>
          </div>
          <small
            *ngIf="
              DerechoDePeticion.get('cedulaExpedicion')?.invalid &&
              DerechoDePeticion.get('cedulaExpedicion')?.touched
            "
            class="text-danger"
          >
            El telefono es obligatorio
          </small>
        </div>
      </div>

      <!-- Input para la direccion del solicitante -->
      <div class="col-md-6">
        <div class="form-group">
          <label for="direccionSolicitante"
            ><strong>Dirección de residencia</strong> -</label
          ><label class="text-primary"><strong>(requerido)</strong></label>
          <div class="input-group">
            <input
              [class.is-invalid]="
                DerechoDePeticion.get('direccionSolicitante')?.invalid &&
                DerechoDePeticion.get('direccionSolicitante')?.touched
              "
              type="text"
              class="form-control"
              formControlName="direccionSolicitante"
              id="direccionSolicitante"
              placeholder="Dirección de residencia del solicitante"
              required
            />
            <!-- Icono de alerta y mensaje de ayuda -->
            <button
              type="button"
              class="btn btn-primary"
              data-bs-toggle="tooltip"
              data-bs-placement="top"
              data-bs-custom-class="custom-tooltip"
              data-bs-title="Dirección de residencia del solicitante"
            >
              <i
                class="fas fa-exclamation-circle text-white"
                style="width: 25px; height: 25px"
              ></i>
            </button>
          </div>
          <small
            *ngIf="
              DerechoDePeticion.get('direccionSolicitante')?.invalid &&
              DerechoDePeticion.get('direccionSolicitante')?.touched
            "
            class="text-danger"
          >
            El correo es obligatorio
          </small>
        </div>
      </div>
    </div>

    <div class="row">
      <!-- Input para el telefono -->
      <div class="col-md-6">
        <div class="form-group">
          <label for="telefonoSolicitante"><strong>Teléfono</strong> -</label
          ><label class="text-primary"><strong>(requerido)</strong></label>
          <div class="input-group">
            <input
              [class.is-invalid]="
                DerechoDePeticion.get('telefonoSolicitante')?.invalid &&
                DerechoDePeticion.get('telefonoSolicitante')?.touched
              "
              type="number"
              class="form-control"
              formControlName="telefonoSolicitante"
              id="telefonoSolicitante"
              placeholder="Solo numeros."
              required
            />
            <!-- Icono de alerta y mensaje de ayuda -->
            <button
              type="button"
              class="btn btn-primary"
              data-bs-toggle="tooltip"
              data-bs-placement="top"
              data-bs-custom-class="custom-tooltip"
              data-bs-title="Telefono al que se le notificara la carta al solicitante."
            >
              <i
                class="fas fa-exclamation-circle text-white"
                style="width: 25px; height: 25px"
              ></i>
            </button>
          </div>
          <small
            *ngIf="
              DerechoDePeticion.get('telefonoSolicitante')?.invalid &&
              DerechoDePeticion.get('telefonoSolicitante')?.touched
            "
            class="text-danger"
          >
            El telefono es obligatorio
          </small>
        </div>
      </div>

      <!-- Input para la ciudad del solicitante -->
      <div class="col-md-6">
        <div class="form-group">
          <label for="correoSolicitante"
            ><strong>Correo electronico del solicitante</strong> -</label
          ><label class="text-primary"><strong>(requerido)</strong></label>
          <div class="input-group">
            <input
              [class.is-invalid]="
                DerechoDePeticion.get('correoSolicitante')?.invalid &&
                DerechoDePeticion.get('correoSolicitante')?.touched
              "
              type="text"
              class="form-control"
              formControlName="correoSolicitante"
              id="correoSolicitante"
              placeholder="Ej: anonimo@correo.com"
              required
            />
            <!-- Icono de alerta y mensaje de ayuda -->
            <button
              type="button"
              class="btn btn-primary"
              data-bs-toggle="tooltip"
              data-bs-placement="top"
              data-bs-custom-class="custom-tooltip"
              data-bs-title="Correo electronico del solicitante"
            >
              <i
                class="fas fa-exclamation-circle text-white"
                style="width: 25px; height: 25px"
              ></i>
            </button>
          </div>
          <small
            *ngIf="
              DerechoDePeticion.get('correoSolicitante')?.invalid &&
              DerechoDePeticion.get('correoSolicitante')?.touched
            "
            class="text-danger"
          >
            El correo es obligatorio
          </small>
        </div>
      </div>
    </div>




    <!-- Botón de envío -->
    <div class="d-flex justify-content-center align-items-center mt-3 p-5">
      <button
        type="submit"
        class="btn btn-primary btn-icon"
        [disabled]="!DerechoDePeticion.valid"
      >
        <i class="fas fa-file-alt me-2"></i> Descargar documento
      </button>
    </div>

  </form>
</div>
